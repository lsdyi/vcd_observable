const a=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},u=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},l=t=>{const n=Math.sin(.5*t);return-2*n*n},w=function(t,n){return t=Math.abs(t),n=Math.abs(n),t<n&&([t,n]=[n,t]),t<1e8?Math.sqrt(t*t+n*n):(n/=t,t*Math.sqrt(1+n*n))},M=function(){throw SyntaxError("Invalid Param")};function I(t,n){const i=Math.abs(t),s=Math.abs(n);return t===0?Math.log(s):n===0?Math.log(i):i<3e3&&s<3e3?Math.log(t*t+n*n)*.5:(t=t*.5,n=n*.5,.5*Math.log(t*t+n*n)+Math.LN2)}const N={re:0,im:0},m=function(t,n){const i=N;if(t==null)i.re=i.im=0;else if(n!==void 0)i.re=t,i.im=n;else switch(typeof t){case"object":if("im"in t&&"re"in t)i.re=t.re,i.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return e.INFINITY;i.re=t.abs*Math.cos(t.arg),i.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return e.INFINITY;i.re=t.r*Math.cos(t.phi),i.im=t.r*Math.sin(t.phi)}else t.length===2?(i.re=t[0],i.im=t[1]):M();break;case"string":i.im=i.re=0;const s=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let r=1,o=0;s===null&&M();for(let h=0;h<s.length;h++){const c=s[h];c===" "||c==="	"||c===`
`||(c==="+"?r++:c==="-"?o++:c==="i"||c==="I"?(r+o===0&&M(),s[h+1]!==" "&&!isNaN(s[h+1])?(i.im+=parseFloat((o%2?"-":"")+s[h+1]),h++):i.im+=parseFloat((o%2?"-":"")+"1"),r=o=0):((r+o===0||isNaN(c))&&M(),s[h+1]==="i"||s[h+1]==="I"?(i.im+=parseFloat((o%2?"-":"")+c),h++):i.re+=parseFloat((o%2?"-":"")+c),r=o=0))}r+o>0&&M();break;case"number":i.im=0,i.re=t;break;default:M()}return isNaN(i.re)||isNaN(i.im),i};function e(t,n){if(!(this instanceof e))return new e(t,n);const i=m(t,n);this.re=i.re,this.im=i.im}e.prototype={re:0,im:0,sign:function(){const t=w(this.re,this.im);return new e(this.re/t,this.im/t)},add:function(t,n){const i=m(t,n),s=this.isInfinite(),r=!(isFinite(i.re)&&isFinite(i.im));return s||r?s&&r?e.NAN:e.INFINITY:new e(this.re+i.re,this.im+i.im)},sub:function(t,n){const i=m(t,n),s=this.isInfinite(),r=!(isFinite(i.re)&&isFinite(i.im));return s||r?s&&r?e.NAN:e.INFINITY:new e(this.re-i.re,this.im-i.im)},mul:function(t,n){const i=m(t,n),s=this.isInfinite(),r=!(isFinite(i.re)&&isFinite(i.im)),o=this.re===0&&this.im===0,h=i.re===0&&i.im===0;return s&&h||r&&o?e.NAN:s||r?e.INFINITY:i.im===0&&this.im===0?new e(this.re*i.re,0):new e(this.re*i.re-this.im*i.im,this.re*i.im+this.im*i.re)},div:function(t,n){const i=m(t,n),s=this.isInfinite(),r=!(isFinite(i.re)&&isFinite(i.im)),o=this.re===0&&this.im===0,h=i.re===0&&i.im===0;if(o&&h||s&&r)return e.NAN;if(h||s)return e.INFINITY;if(o||r)return e.ZERO;if(i.im===0)return new e(this.re/i.re,this.im/i.re);if(Math.abs(i.re)<Math.abs(i.im)){const c=i.re/i.im,f=i.re*c+i.im;return new e((this.re*c+this.im)/f,(this.im*c-this.re)/f)}else{const c=i.im/i.re,f=i.im*c+i.re;return new e((this.re+this.im*c)/f,(this.im-this.re*c)/f)}},pow:function(t,n){const i=m(t,n),s=this.re===0&&this.im===0;if(i.re===0&&i.im===0)return e.ONE;if(i.im===0){if(this.im===0&&this.re>0)return new e(Math.pow(this.re,i.re),0);if(this.re===0)switch((i.re%4+4)%4){case 0:return new e(Math.pow(this.im,i.re),0);case 1:return new e(0,Math.pow(this.im,i.re));case 2:return new e(-Math.pow(this.im,i.re),0);case 3:return new e(0,-Math.pow(this.im,i.re))}}if(s&&i.re>0)return e.ZERO;const o=Math.atan2(this.im,this.re),h=I(this.re,this.im);let c=Math.exp(i.re*h-i.im*o),f=i.im*h+i.re*o;return new e(c*Math.cos(f),c*Math.sin(f))},sqrt:function(){const t=this.re,n=this.im;if(n===0)return t>=0?new e(Math.sqrt(t),0):new e(0,Math.sqrt(-t));const i=w(t,n);let s=Math.sqrt(.5*(i+Math.abs(t))),r=Math.abs(n)/(2*s);return t>=0?new e(s,n<0?-r:r):new e(r,n<0?-s:s)},exp:function(){const t=Math.exp(this.re);return this.im===0?new e(t,0):new e(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,n=this.im;return new e(Math.expm1(t)*Math.cos(n)+l(n),Math.exp(t)*Math.sin(n))},log:function(){const t=this.re,n=this.im;return n===0&&t>0?new e(Math.log(t),0):new e(I(t,n),Math.atan2(n,t))},abs:function(){return w(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,n=this.im;return new e(Math.sin(t)*a(n),Math.cos(t)*u(n))},cos:function(){const t=this.re,n=this.im;return new e(Math.cos(t)*a(n),-Math.sin(t)*u(n))},tan:function(){const t=2*this.re,n=2*this.im,i=Math.cos(t)+a(n);return new e(Math.sin(t)/i,u(n)/i)},cot:function(){const t=2*this.re,n=2*this.im,i=Math.cos(t)-a(n);return new e(-Math.sin(t)/i,u(n)/i)},sec:function(){const t=this.re,n=this.im,i=.5*a(2*n)+.5*Math.cos(2*t);return new e(Math.cos(t)*a(n)/i,Math.sin(t)*u(n)/i)},csc:function(){const t=this.re,n=this.im,i=.5*a(2*n)-.5*Math.cos(2*t);return new e(Math.sin(t)*a(n)/i,-Math.cos(t)*u(n)/i)},asin:function(){const t=this.re,n=this.im,i=new e(n*n-t*t+1,-2*t*n).sqrt(),s=new e(i.re-n,i.im+t).log();return new e(s.im,-s.re)},acos:function(){const t=this.re,n=this.im,i=new e(n*n-t*t+1,-2*t*n).sqrt(),s=new e(i.re-n,i.im+t).log();return new e(Math.PI/2-s.im,s.re)},atan:function(){const t=this.re,n=this.im;if(t===0){if(n===1)return new e(0,1/0);if(n===-1)return new e(0,-1/0)}const i=t*t+(1-n)*(1-n),s=new e((1-n*n-t*t)/i,-2*t/i).log();return new e(-.5*s.im,.5*s.re)},acot:function(){const t=this.re,n=this.im;if(n===0)return new e(Math.atan2(1,t),0);const i=t*t+n*n;return i!==0?new e(t/i,-n/i).atan():new e(t!==0?t/0:0,n!==0?-n/0:0).atan()},asec:function(){const t=this.re,n=this.im;if(t===0&&n===0)return new e(0,1/0);const i=t*t+n*n;return i!==0?new e(t/i,-n/i).acos():new e(t!==0?t/0:0,n!==0?-n/0:0).acos()},acsc:function(){const t=this.re,n=this.im;if(t===0&&n===0)return new e(Math.PI/2,1/0);const i=t*t+n*n;return i!==0?new e(t/i,-n/i).asin():new e(t!==0?t/0:0,n!==0?-n/0:0).asin()},sinh:function(){const t=this.re,n=this.im;return new e(u(t)*Math.cos(n),a(t)*Math.sin(n))},cosh:function(){const t=this.re,n=this.im;return new e(a(t)*Math.cos(n),u(t)*Math.sin(n))},tanh:function(){const t=2*this.re,n=2*this.im,i=a(t)+Math.cos(n);return new e(u(t)/i,Math.sin(n)/i)},coth:function(){const t=2*this.re,n=2*this.im,i=a(t)-Math.cos(n);return new e(u(t)/i,-Math.sin(n)/i)},csch:function(){const t=this.re,n=this.im,i=Math.cos(2*n)-a(2*t);return new e(-2*u(t)*Math.cos(n)/i,2*a(t)*Math.sin(n)/i)},sech:function(){const t=this.re,n=this.im,i=Math.cos(2*n)+a(2*t);return new e(2*a(t)*Math.cos(n)/i,-2*u(t)*Math.sin(n)/i)},asinh:function(){const t=this.re,n=this.im;if(n===0){if(t===0)return new e(0,0);const o=Math.abs(t),h=Math.log(o+Math.sqrt(o*o+1));return new e(t<0?-h:h,0)}const i=t*t-n*n+1,s=2*t*n,r=new e(i,s).sqrt();return new e(t+r.re,n+r.im).log()},acosh:function(){const t=this.re,n=this.im;if(n===0){if(t>1)return new e(Math.log(t+Math.sqrt(t-1)*Math.sqrt(t+1)),0);if(t<-1){const r=Math.sqrt(t*t-1);return new e(Math.log(-t+r),Math.PI)}return new e(0,Math.acos(t))}const i=new e(t-1,n).sqrt(),s=new e(t+1,n).sqrt();return new e(t+i.re*s.re-i.im*s.im,n+i.re*s.im+i.im*s.re).log()},atanh:function(){const t=this.re,n=this.im;if(n===0){if(t===0)return new e(0,0);if(t===1)return new e(1/0,0);if(t===-1)return new e(-1/0,0);if(-1<t&&t<1)return new e(.5*Math.log((1+t)/(1-t)),0);if(t>1){const f=(t+1)/(t-1);return new e(.5*Math.log(f),-Math.PI/2)}const c=(1+t)/(1-t);return new e(.5*Math.log(-c),Math.PI/2)}const i=1-t,s=1+t,r=i*i+n*n;if(r===0)return new e(t!==-1?t/0:0,n!==0?n/0:0);const o=(s*i-n*n)/r,h=(n*i+s*n)/r;return new e(I(o,h)/2,Math.atan2(h,o)/2)},acoth:function(){const t=this.re,n=this.im;if(t===0&&n===0)return new e(0,Math.PI/2);const i=t*t+n*n;return i!==0?new e(t/i,-n/i).atanh():new e(t!==0?t/0:0,n!==0?-n/0:0).atanh()},acsch:function(){const t=this.re,n=this.im;if(n===0){if(t===0)return new e(1/0,0);const s=1/t;return new e(Math.log(s+Math.sqrt(s*s+1)),0)}const i=t*t+n*n;return i!==0?new e(t/i,-n/i).asinh():new e(t!==0?t/0:0,n!==0?-n/0:0).asinh()},asech:function(){const t=this.re,n=this.im;if(this.isZero())return e.INFINITY;const i=t*t+n*n;return i!==0?new e(t/i,-n/i).acosh():new e(t!==0?t/0:0,n!==0?-n/0:0).acosh()},inverse:function(){if(this.isZero())return e.INFINITY;if(this.isInfinite())return e.ZERO;const t=this.re,n=this.im,i=t*t+n*n;return new e(t/i,-n/i)},conjugate:function(){return new e(this.re,-this.im)},neg:function(){return new e(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new e(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new e(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new e(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,n){const i=m(t,n);return Math.abs(i.re-this.re)<=e.EPSILON&&Math.abs(i.im-this.im)<=e.EPSILON},clone:function(){return new e(this.re,this.im)},toString:function(){let t=this.re,n=this.im,i="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<e.EPSILON&&(t=0),Math.abs(n)<e.EPSILON&&(n=0),n===0?i+t:(t!==0?(i+=t,i+=" ",n<0?(n=-n,i+="-"):i+="+",i+=" "):n<0&&(n=-n,i+="-"),n!==1&&(i+=n),i+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}},e.ZERO=new e(0,0),e.ONE=new e(1,0),e.I=new e(0,1),e.PI=new e(Math.PI,0),e.E=new e(Math.E,0),e.INFINITY=new e(1/0,1/0),e.NAN=new e(NaN,NaN),e.EPSILON=1e-15;export{e as Complex,e as default};
